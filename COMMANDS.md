# UI-Agent 命令参考

本文档列出了 UI-Agent 支持的所有自然语言命令。

## 目录

- [窗口管理命令](#窗口管理命令)
- [浏览器启动命令](#浏览器启动命令)
- [浏览器自动化命令](#浏览器自动化命令)
- [文件操作命令](#文件操作命令)
- [编辑操作命令](#编辑操作命令)
- [导航操作命令](#导航操作命令)
- [运行操作命令](#运行操作命令)
- [搜索操作命令](#搜索操作命令)
- [工作流命令](#工作流命令)

---

## 窗口管理命令

激活、切换和管理工作区窗口。

| 命令示例 | 说明 |
|---------|------|
| `激活窗口` | 激活 PyCharm 窗口 |
| `切换到 PyCharm` | 切换到 PyCharm 窗口 |
| `切换到 Chrome` | 切换到 Chrome 浏览器 |
| `打开微信` | 打开微信应用窗口 |
| `激活 WeChatApp.exe` | 通过进程名激活窗口 |

**别名**：激活、切换到、打开、switch to、activate

---

## 浏览器启动命令

打开浏览器并访问指定网址。

| 命令示例 | 说明 |
|---------|------|
| `打开浏览器访问 https://www.baidu.com` | 打开默认浏览器访问百度 |
| `在 Chrome 中打开 https://github.com` | 使用 Chrome 打开 GitHub |
| `访问网址 https://example.com` | 访问指定网址 |

**别名**：打开浏览器、访问网址、在浏览器中打开、浏览器打开、访问、打开网址

---

## 浏览器自动化命令

控制浏览器进行点击、滚动、输入等操作。

> **重要**：浏览器自动化命令必须使用明确的前缀（"网页"、"页面"、"浏览器"），以区分于普通 UI 操作。

| 命令示例 | 说明 |
|---------|------|
| `网页点击 百度一下按钮` | 点击页面元素 |
| `页面滚动` | 向下滚动页面 |
| `向上滚动网页` | 向上滚动页面 |
| `在网页输入框中输入 Python` | 在输入框中输入文本 |
| `等待页面加载完成` | 等待元素出现 |

**别名**：
- 点击：网页点击、浏览器点击、点击网页、页面点击、browser click
- 滚动：网页滚动、滚动网页、浏览器滚动、页面滚动、scroll page、滚动页面
- 输入：在网页输入、浏览器输入、网页输入、页面输入、browser type
- 等待：等待网页元素、等待页面元素、browser wait、等待页面加载

### 元素定位方式

浏览器自动化支持多种元素定位方式：

| 定位方式 | 示例 |
|---------|------|
| CSS 选择器 | `.submit-button`, `#search`, `input[name="q"]` |
| 文本内容 | `text=提交` |
| XPath | `xpath=//button[@type='submit']` |
| 坐标定位 | `coords=100,200` |

---

## 文件操作命令

操作 IDE 中的文件。

| 命令示例 | 说明 |
|---------|------|
| `双击文件 main.py` | 双击文件树中的文件 |
| `打开文件 main.py` | 打开指定文件 |
| `保存文件` | 保存当前文件 |
| `关闭文件` | 关闭当前文件 |
| `新建文件 test.py` | 创建新文件 |

**别名**：
- 双击：双击文件、double click file、双击
- 打开：打开文件、open file、打开
- 保存：保存文件、save file、保存
- 关闭：关闭文件、close file、关闭
- 新建：新建文件、new file、新建

---

## 编辑操作命令

编辑和重构代码。

| 命令示例 | 说明 |
|---------|------|
| `重命名当前函数为 foo` | 重命名符号 |
| `格式化代码` | 格式化当前文件 |
| `提取方法` | 提选代码为方法 |
| `注释当前行` | 切换注释 |
| `优化导入` | 优化和删除未使用的导入 |

**别名**：
- 重命名：重命名、rename、refactor_rename
- 格式化：格式化、format code、格式化代码
- 提取方法：提取方法、extract method
- 注释：切换注释、toggle comment、注释
- 优化导入：优化导入、optimize imports

---

## 导航操作命令

在项目中导航。

| 命令示例 | 说明 |
|---------|------|
| `跳转到第 50 行` | 跳转到指定行 |
| `查找文件 main.py` | 在项目中查找文件 |
| `查找符号 foo` | 查找定义/引用 |

**别名**：
- 跳转：跳转到行、go to line、跳转
- 查找文件：查找文件、find file、搜索文件
- 查找：在文件中查找、find、查找

---

## 运行操作命令

运行和调试代码。

| 命令示例 | 说明 |
|---------|------|
| `运行当前文件` | 运行当前文件 |
| `调试当前文件` | 调试当前文件 |
| `停止运行` | 停止当前运行 |

**别名**：
- 运行：运行当前文件、run、运行
- 调试：调试、debug、调试当前文件
- 停止：停止运行、stop、停止

---

## 搜索操作命令

在文件和项目中搜索。

| 命令示例 | 说明 |
|---------|------|
| `在文件中查找 foo` | 在当前文件中搜索 |
| `在项目中查找 bar` | 在整个项目中搜索 |

**别名**：
- 文件内搜索：在文件中查找、find、查找
- 项目搜索：在项目中查找、find in project、全局搜索

---

## 工作流命令

执行预定义的多步骤工作流。

### 执行工作流

通过 Markdown 文件定义并执行多步骤操作流程。

| 命令示例 | 说明 |
|---------|------|
| `执行工作流 workflows/simple.md` | 执行工作流文件 |
| `运行工作流 workflows/test.md` | 运行工作流文件 |
| `工作流 workflows/deploy.md` | 执行工作流文件（简写） |

**别名**：执行工作流、运行工作流、运行步骤、执行脚本、工作流、workflow、execute workflow、run workflow

### 验证工作流

验证工作流文件格式是否正确，不执行实际操作。

| 命令示例 | 说明 |
|---------|------|
| `验证工作流 workflows/test.md` | 验证工作流格式 |
| `检查工作流 workflows/deploy.md` | 检查工作流是否有效 |

**别名**：验证工作流、验证步骤、validate workflow、check workflow

### 命令行使用

```bash
# 执行工作流
python -m src.main --workflow workflows/simple-example.md

# 验证工作流（不实际执行）
python -m src.main --workflow workflows/simple-example.md --dry-run
```

### 工作流文档格式

工作流使用 Markdown 格式定义：

```markdown
---
name: "部署流程"
description: "自动化部署应用"
variables:
  app_name: "my-app"
---

# 部署流程工作流

## 步骤

1. 激活 PyCharm 窗口

2. 打开文件 main.py

   ```yaml
   operation: double_click_file
   parameters:
     filename: "main.py"
   retry_count: 2
   ```

3. [if_success] 跳转到第 42 行

4. [if_failure] 显示错误提示
   ```yaml
   continue_on_error: true
   ```
```

### 工作流特性

- **条件分支**：使用 `[if_success]` 或 `[if_failure]` 标记条件步骤
- **重试机制**：在 YAML 配置中设置 `retry_count` 和 `retry_interval`
- **错误处理**：使用 `continue_on_error` 控制失败时的行为
- **混合格式**：纯自然语言或 YAML 配置，灵活选择

---

## 输入操作命令

在输入框中输入文本。

| 命令示例 | 说明 |
|---------|------|
| `在搜索框中输入 Python 并回车` | 在输入框输入并提交 |
| `在终端下方的输入框中输入 python --version` | 在指定位置输入 |

**别名**：输入、输入文本、在输入框中输入

---

## 模板匹配命令

使用图像模板匹配定位和点击 UI 元素。

| 命令示例 | 说明 |
|---------|------|
| `点击运行按钮 --template run_button.png` | 使用模板图片点击按钮 |
| `点击数据库按钮 --template database-button.png` | 使用模板图片点击 |

**别名**：点击按钮、click button

---

## 通用说明

### 参数格式

- 文件名：直接使用文件名，如 `main.py`
- 行号：使用数字，如 `第 50 行` 或 `50`
- URL：完整网址，如 `https://www.example.com`
- 文本内容：直接输入需要的内容

### 注意事项

1. **浏览器自动化命令**：必须使用"网页"、"页面"或"浏览器"前缀
2. **危险操作**：重命名、删除等操作可能需要确认
3. **紧急停止**：使用 Ctrl+C 停止当前操作
4. **日志记录**：所有操作都会记录在日志文件中

### 获取帮助

```bash
# 查看帮助信息
python -m src.main --help

# 启动交互式 CLI
python -m src.main
```
